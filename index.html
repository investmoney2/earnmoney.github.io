<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fly Up Game</title>
  <style>
  /* Giriş/Kayıt için CSS */
  #auth-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    #auth-container input {
      margin: 10px 0;
      padding: 10px;
      border: none;
      border-radius: 5px;
      width: 80%;
      max-width: 300px;
    }

    #auth-container button {
      padding: 10px 20px;
      margin: 5px;
      background-color: #FF4500;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    #auth-container button:hover {
      background-color: #FF6347;
    }
    #telegram-contact {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
}

#telegram-contact img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
  transition: 0.3s;
}

#telegram-contact img:hover {
  transform: scale(1.1);
}

body {
  font-family: 'Arial', sans-serif;
  background: linear-gradient(to bottom, #8B0000, #B22222); /* Kırmızı-siyah geçiş */
  color: white;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

h1 {
  text-align: center;
  margin: 20px 0;
}

#left-container, #right-container {
  padding: 20px;
  border-radius: 10px;
  margin: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  background: rgba(0, 0, 0, 0.6); /* Yarı saydam siyah */
}

#left-container {
  width: 70%;
}

#right-container {
  width: 25%;
}

.plane {
  font-size: 40px;
  margin-top: 20px;
  animation: fly 1s infinite alternate;
}

@keyframes fly {
  from { transform: translateY(0); }
  to { transform: translateY(-10px); }
}

#multiplier {
  font-size: 40px;
  margin: 20px 0;
  font-weight: bold;
}

button {
  background-color: #FF4500; /* Turuncu kırmızı */
  border: none;
  padding: 10px 20px;
  font-size: 18px;
  border-radius: 5px;
  cursor: pointer;
  margin: 10px;
  transition: 0.3s;
}

button:hover {
  background-color: #FF6347; /* Daha açık turuncu */
}

button:disabled {
  background-color: #aaa;
  cursor: not-allowed;
}

#balance {
  font-size: 20px;
  margin: 20px 0;
  font-weight: bold;
}

input {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  width: 80px;
  text-align: center;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

th, td {
  padding: 10px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

#history {
  margin-top: 20px;
  text-align: left;
}

#message {
  margin-top: 20px;
  padding: 10px;
  border-radius: 5px;
  font-size: 16px;
  display: none;
}

.success {
  background-color: rgba(50, 205, 50, 0.8); /* Yeşil başarı mesajı */
}

.error {
  background-color: rgba(255, 69, 0, 0.8); /* Kırmızı hata mesajı */
}

#deposit-modal, #withdraw-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  text-align: center;
}

#deposit-modal button, #withdraw-modal button {
  background-color: #FF6347; /* Açık turuncu kırmızı */
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  font-size: 18px;
  cursor: pointer;
  margin-top: 10px;
}

#deposit-modal button:hover, #withdraw-modal button:hover {
  background-color: #FF4500; /* Daha koyu turuncu kırmızı */
}

#withdraw-modal input {
  width: 250px;
}

  </style>
</head>
<body>
  <div id="auth-container">
    <h1>Fly Up Game</h1>
    <div id="auth-container">
      <!-- Kayıt Formu -->
      <form id="register-form">
        <h2>Register</h2>
        <input type="text" id="register-username" placeholder="Username" required />
        <input type="password" id="register-password" placeholder="Password" required />
        <button type="button" id="register-btn">Register</button>
        <p>Already have an account? <a href="#" id="login-link">Login here</a></p>
      </form>
    
      <!-- Giriş Formu -->
      <form id="login-form" style="display: none;">
        <h2>Login</h2>
        <input type="text" id="login-username" placeholder="Username" required />
        <input type="password" id="login-password" placeholder="Password" required />
        <button type="button" id="login-btn">Login</button>
        <p>Don't have an account? <a href="#" id="register-link">Register here</a></p>
      </form>
      <p id="auth-message" style="color: rgb(0, 255, 30); margin-top: 10px;"></p>
    </div>
    

      <p id="auth-message"></p>
    </div>
  </div> 
  <!-- Telegram Contact Section -->
<div id="telegram-contact">
  <a href="https://t.me/flyupearn" target="_blank">
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" />
  </a>
</div>

  <div id="left-container">
    <h1>Fly Up Game</h1>
    <div id="balance">Balance: $0</div>
    <label for="bet-input">Bet Amount: </label>
    <input id="bet-input" type="number" min="0.2" max="100" value="10">
    <div class="plane">✈️</div>
    <div id="multiplier">1.00x</div>
    <button id="start-btn">Start</button>
    <button id="cashout-btn" disabled>Cash Out</button>
    <div id="result"></div>
    <div id="message" class="success"></div>
    <div id="history">
      <h3>Game History (Last 5)</h3>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Bet</th>
            <th>Multiplier</th>
            <th>Result</th>
          </tr>
        </thead>
        <tbody id="history-table">
          <!-- Game history rows will be added here -->
        </tbody>
      </table>
    </div>
  </div>

  <div id="right-container">
    <h3>Banking</h3>
    <label for="deposit-input">Deposit Amount: </label>
    <input id="deposit-input" type="number" min="10" value="50">
    <button id="deposit-btn">Deposit</button>
    <br>
    <label for="withdraw-input">Withdraw Amount: </label>
    <input id="withdraw-input" type="number" min="10" value="50">
    <button id="withdraw-btn">Withdraw</button>
    <div id="banking-result"></div>
  </div>

  <!-- Modal for Deposit Address -->
  <div id="deposit-modal">
    <p>USDT (TRC20) Adresi: <strong>TEU21vUmQ27fmALcyFLwPJLZgjods3zgkw</strong></p>
    <button id="close-deposit-modal">Close</button>
  </div>

  <!-- Modal for Withdraw -->
<div id="withdraw-modal">
  <label for="withdraw-address">USDT (TRC20) Address:</label>
  <input type="text" id="withdraw-address" placeholder="USDT Adresinizi Girin">
  <br><br>
  <label for="withdraw-amount">Amount you want to withdraw:</label>
  <input type="number" id="withdraw-amount" min="10" value="50">
  <br><br>
  <button id="confirm-withdraw-btn">Confirm Withdraw</button>
  <button id="close-withdraw-modal">Close</button>
  <br><br>
  <p style="font-size: 14px; color: #FF6347; text-align: center;">
    Note: Write the address correctly, if it is written to the wrong address, your money will be wasted.
  </p>
</div>

<script>
  let balance = 0;
let multiplier = 1.00;
let gameRunning = false;
let interval;
let gameHistory = [];
const maxHistory = 5;

const balanceDisplay = document.getElementById('balance');
const multiplierDisplay = document.getElementById('multiplier');
const startButton = document.getElementById('start-btn');
const cashoutButton = document.getElementById('cashout-btn');
const resultDisplay = document.getElementById('result');
const betInput = document.getElementById('bet-input');
const depositInput = document.getElementById('deposit-input');
const withdrawInput = document.getElementById('withdraw-input');
const depositButton = document.getElementById('deposit-btn');
const withdrawButton = document.getElementById('withdraw-btn');
const bankingResultDisplay = document.getElementById('banking-result');
const historyTable = document.getElementById('history-table');
const messageDisplay = document.getElementById('message');
const planeElement = document.querySelector('.plane');
const depositModal = document.getElementById('deposit-modal');
const withdrawModal = document.getElementById('withdraw-modal');
const closeDepositModalButton = document.getElementById('close-deposit-modal');
const closeWithdrawModalButton = document.getElementById('close-withdraw-modal');
const confirmWithdrawButton = document.getElementById('confirm-withdraw-btn');

// Kullanıcı verilerini saklamak için LocalStorage kullanıyoruz
let users = JSON.parse(localStorage.getItem('users')) || {};

// Mesajları göstermek için fonksiyon
function showAuthMessage(message) {
  const authMessage = document.getElementById('auth-message');
  authMessage.textContent = message;
  setTimeout(() => authMessage.textContent = '', 3000);
}
// Kullanıcı girişine tıklandığında giriş formunu göster
document.getElementById('login-link').addEventListener('click', (e) => {
  e.preventDefault();  // Linkin varsayılan davranışını engelle
  document.getElementById('register-form').style.display = 'none';  // Kayıt formunu gizle
  document.getElementById('login-form').style.display = 'block';  // Giriş formunu göster
});

// Kullanıcı kayıta tıklandığında kayıt formunu göster
document.getElementById('register-link').addEventListener('click', (e) => {
  e.preventDefault();  // Linkin varsayılan davranışını engelle
  document.getElementById('login-form').style.display = 'none';  // Giriş formunu gizle
  document.getElementById('register-form').style.display = 'block';  // Kayıt formunu göster
});


// Register işlemi
document.getElementById('register-btn').addEventListener('click', () => {
  const username = document.getElementById('register-username').value.trim();
  const password = document.getElementById('register-password').value;

  if (!username || !password) {
    showAuthMessage('Please fill all fields.');
    return;
  }

  if (users[username]) {
    showAuthMessage('Username already exists.');
    return;
  }

  users[username] = { password, balance: 0 }; // Yeni kullanıcı ekleniyor, başlangıç bakiyesi: 1000
  localStorage.setItem('users', JSON.stringify(users));
  showAuthMessage('Registration successful! Please log in.');
  document.getElementById('register-form').style.display = 'none';
  document.getElementById('login-form').style.display = 'block';
});

// Login işlemi
document.getElementById('login-btn').addEventListener('click', () => {
  const username = document.getElementById('login-username').value.trim();
  const password = document.getElementById('login-password').value;

  if (!users[username] || users[username].password !== password) {
    showAuthMessage('Invalid username or password.');
    return;
  }

  localStorage.setItem('currentUser', username); // Aktif kullanıcıyı kaydediyoruz
  document.getElementById('auth-container').style.display = 'none';
  balance = users[username].balance; // Kullanıcının bakiyesini yüklüyoruz
  balanceDisplay.textContent = `Balance: $${balance.toFixed(2)}`;
  showMessage(`Welcome back, ${username}!`, 'success');
});

// LocalStorage'tan bakiye okuma
function loadBalance() {
  const storedBalance = localStorage.getItem('balance');
  if (storedBalance) {
    balance = parseFloat(storedBalance);  // LocalStorage'tan alınan veriyi float'a çevir
  } else {
    balance = 0;  // Eğer localStorage'ta veri yoksa, başlangıç değeri 0 olsun
  }
  balanceDisplay.textContent = `Balance: $${balance.toFixed(2)}`;  // Ekranda bakiyeyi göster
}

// Bakiye güncelleme fonksiyonu
function updateBalance(amount) {
  balance += amount;
  balanceDisplay.textContent = `Balance: $${balance.toFixed(2)}`;
  localStorage.setItem('balance', balance.toFixed(2));  // Yeni bakiyeyi localStorage'a kaydet
}

// Mesaj göstermek için fonksiyon
function showMessage(message, type) {
  messageDisplay.textContent = message;
  messageDisplay.className = type;
  messageDisplay.style.display = 'block';
  setTimeout(() => {
    messageDisplay.style.display = 'none';
  }, 3000);
}

// Geçmişi güncelleme
function addToHistory(bet, multiplier, result) {
  if (gameHistory.length >= maxHistory) {
    gameHistory.shift();
  }
  gameHistory.push({ bet, multiplier, result });
  updateHistoryTable();
}

function updateHistoryTable() {
  historyTable.innerHTML = '';
  gameHistory.forEach((entry, index) => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${index + 1}</td><td>$${entry.bet.toFixed(2)}</td><td>${entry.multiplier.toFixed(2)}x</td><td>${entry.result}</td>`;
    historyTable.appendChild(row);
  });
}

// Sayfa yüklendiğinde bakiye yüklenmesi
window.onload = function() {
  loadBalance();  // Bakiye localStorage'tan yüklenir
}

startButton.addEventListener('click', () => {
  const betAmount = parseFloat(betInput.value);
  if (isNaN(betAmount) || betAmount < 0.2 || betAmount > balance) {
    showMessage("Invalid bet amount.", 'error');
    return;
  }
  if (gameRunning) return;

  updateBalance(-betAmount);  // Bakiyeden düşme
  multiplier = 1.00;
  multiplierDisplay.textContent = `${multiplier.toFixed(2)}x`;
  resultDisplay.textContent = '';
  gameRunning = true;
  startButton.disabled = true;
  cashoutButton.disabled = false;
  
  let planePosition = 0;  // Uçak başlangıç pozisyonu
  planeElement.style.transform = `translateY(${planePosition}px)`;  // Uçak başlangıç pozisyonunda

  interval = setInterval(() => {
    multiplier += 0.01;  // Multiplier artacak
    planePosition += 2 * multiplier;  // Uçak hızlanacak

    planeElement.style.transform = `translateY(-${planePosition}px)`;  // Uçak yüksekliği

    multiplierDisplay.textContent = `${multiplier.toFixed(2)}x`;

    if (Math.random() < 0.01 * multiplier) {
      endGame(false, betAmount);  // Uçak patladı
    }

    if (planePosition > 2000) {  // Uçak çok yüksek olursa patlasın
      endGame(false, betAmount);
    }
  }, 100);
});

cashoutButton.addEventListener('click', () => {
  if (!gameRunning) return;

  const betAmount = parseFloat(betInput.value);
  const winnings = betAmount * multiplier;
  endGame(true, winnings);  // Oyunu bitir
});

function endGame(cashedOut, amount) {
  gameRunning = false;
  clearInterval(interval);
  startButton.disabled = false;
  cashoutButton.disabled = true;

  if (cashedOut) {
    updateBalance(amount);  // Kazanılan miktar bakiyeye eklenir
    addToHistory(amount / multiplier, multiplier, `Won $${amount.toFixed(2)}`);
    showMessage(`Cashed out at ${multiplier.toFixed(2)}x! Won $${amount.toFixed(2)}!`, 'success');
  } else {
    addToHistory(amount, multiplier, 'Lost');
    showMessage(`Plane crashed at ${multiplier.toFixed(2)}x! You lost.`, 'error');
  }
}

// Deposit işlemi
depositButton.addEventListener('click', () => {
  depositModal.style.display = 'block';
});

withdrawButton.addEventListener('click', () => {
  withdrawModal.style.display = 'block';
});

closeDepositModalButton.addEventListener('click', () => {
  depositModal.style.display = 'none';
});

closeWithdrawModalButton.addEventListener('click', () => {
  withdrawModal.style.display = 'none';
});

confirmWithdrawButton.addEventListener('click', () => {
  const withdrawAddress = document.getElementById('withdraw-address').value;
  const withdrawAmount = parseFloat(document.getElementById('withdraw-amount').value);

  if (withdrawAmount <= 0 || withdrawAmount > balance) {
    showMessage('Invalid withdraw amount.', 'error');
    return;
  }

  updateBalance(-withdrawAmount);  // Çekilen miktar bakiyeden düşer
  showMessage(`Withdrawn $${withdrawAmount.toFixed(2)} to ${withdrawAddress}!`, 'success');
  withdrawModal.style.display = 'none';
});

// Kullanıcı girişine tıklandığında giriş formunu göster
document.getElementById('login-link').addEventListener('click', (e) => {
  e.preventDefault();  // Linkin varsayılan davranışını engelle
  document.getElementById('register-form').style.display = 'none';  // Kayıt formunu gizle
  document.getElementById('login-form').style.display = 'block';  // Giriş formunu göster
});

</script>


</body>
</html>
